<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <script>
        document.getElementsByTagName("html")[0].className += " js";
    </script>
    <link rel="icon" type="image/svg+xml" href="assets/img/favicon.ico"/>
    <link
            href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&amp;family=Inter:wght@400;500;600;700&amp;display=swap"
            rel="stylesheet"
    />
    <link id="elliottframe" rel="stylesheet" href="assets/css/style5e1f.css?v=2"/>
    <script>
        if (!("CSS" in window) || !CSS.supports("color", "var(--color-var)")) {
            var cfStyle = document.getElementById("elliottframe");
            if (cfStyle) {
                var href = cfStyle.getAttribute("href");
                href = href.replace("style.html", "style-fallback.html");
                cfStyle.setAttribute("href", href);
            }
            document.getElementsByTagName("html")[0].className += " yx-nlx";
        }
    </script>
    <script src="assets/js/dark-mode.js"></script>
    <title>Nathan Wilck√©</title>
</head>
<body>
<header class="yx-nmc">
    <div class="yx-t yx-ga yx-mf flex items-center">
        <a class="yx-nmh" href="#nathanRocks">
            <img src="assets/img/author-img-1.jpg" alt="Author picture" style="border-radius: 50%"/>
        </a>
        <ul class="yx-ndb yx-nlk" id="theme-switch">
            <li class="yx-ndw">
                <input
                        class="yx-ndk sr-only"
                        type="radio"
                        name="radio-switch-name"
                        id="radio-1"
                        value="light"
                        checked=""
                />
                <label class="yx-ndx" for="radio-1"
                >
                    <svg class="icon yx-rc" viewBox="0 0 16 16">
                        <title>Enable light mode</title>
                        <path
                                d="M7 0h2v2H7zM12.88 1.637l1.414 1.415-1.415 1.413-1.414-1.414zM14 7h2v2h-2zM12.95 14.433l-1.415-1.414 1.414-1.414 1.415 1.413zM7 14h2v2H7zM2.98 14.363L1.566 12.95l1.415-1.414 1.414 1.415zM0 7h2v2H0zM3.05 1.707L4.465 3.12 3.05 4.535 1.636 3.121z"
                        ></path>
                        <path
                                d="M8 4C5.8 4 4 5.8 4 8s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"
                        ></path>
                    </svg
                    >
                </label>
            </li>
            <li class="yx-ndw">
                <input
                        class="yx-ndk sr-only"
                        type="radio"
                        name="radio-switch-name"
                        id="radio-2"
                        value="dark"
                />
                <label class="yx-ndx" for="radio-2"
                >
                    <svg class="icon yx-rc" viewBox="0 0 16 16">
                        <title>Enable dark mode</title>
                        <path
                                d="M6,0C2.5,0.9,0,4.1,0,7.9C0,12.4,3.6,16,8.1,16c3.8,0,6.9-2.5,7.9-6C9.9,11.7,4.3,6.1,6,0z"
                        ></path>
                    </svg>
                </label>
                <div aria-hidden="true" class="yx-nd_"></div>
            </li>
        </ul>
    </div>
</header>

<article class="t-article-v3 yx-sy js-reading-content">
    <div class="yx-nm_ yx-sg"
         style="background-image: url('assets/img/dotnetentry.png');">
        <div class="yx-t max-width-adaptive-sm">
            <div class="yx-nmj text-component yx-ht">
                <h1 class="text-xxxl yx-pn">
                    Exploring the Power of .NET 7: A Developer's Perspective at Elliott
                </h1>
                <p class="text-sm yx-pn">
                    Janvier 01, 2023
                </p>
            </div>
        </div>
    </div>

    <div class="yx-t max-width-adaptive-sm yx-sy js-sticky-sharebar-target">
        <div class="text-component yx-hm yx-ngo">
            <p class="yx-nhb">
                In this article, we will delve into the newest version of the .NET framework - .NET 7. As a .Net
                developer at <a href="https://elliott.lu/" target="_blank">Elliott</a>, a company that specializes in
                providing enterprise-level solutions for clients, we
                have a wealth of experience to draw from in discussing the latest advancements in .NET. We'll start by
                providing an overview of what .NET 7 is and its key features and improvements. We'll then delve into the
                performance enhancements, specifically focusing on the introduction of EF7 and its impact on performance
                compared to previous versions. Additionally, we'll provide real-world examples of improvements in
                application performance. We'll also discuss the ease of migration from .NET 6, providing tips and best
                practices for a smooth transition. Furthermore, drawing from our own experience as a .Net developer,
                we'll share the benefits and challenges faced during implementation of .NET 7 for a banking client in
                Luxembourg, and evaluate its effectiveness for enterprise-level applications. Finally, we'll conclude
                with additional resources for further information and references.
            </p>
            <p>
                So, let's dive into the exciting world of .Net 7! üöÄ
            </p>

            <figure class="text-component__block">
                <img src="assets/img/dotnet7.png"
                     alt="Microsoft .NET 7"/>
                <figcaption>Microsoft .NET 7</figcaption>
            </figure>
            <hr/>

            <h2>Plan</h2>
            <ol class="yx-npq yx-ndt">
                <li>Introduction</li>
                <li>Overview of .NET 7</li>
                <li>Migration to .NET 7</li>
                <li>Our Experience</li>
                <li>Conclusion</li>
                <li>References</li>
            </ol>
            <hr/>
            <div class="text-component__block text-component__block--outset">
                <h3 class="yx-ht">
                    Introduction
                </h3>
            </div>
            <p>
                The latest version of .NET framework, .NET 7, has been recently released by Microsoft. This
                cross-platform, open-source software development platform offers a range of enhancements for developers,
                such as performance improvements, C# language upgrades, and cloud-native, container-based development
                capabilities. In this article, we will explore the key features and improvements of .NET 7, the ease of
                migration process from .NET 6, and our own experience with .NET 7, highlighting the benefits and
                challenges faced during implementation for a client in the banking industry.
            </p>

            <div class="text-component__block text-component__block--outset">
                <h3 class="yx-ht">
                    Overview of .NET 7
                </h3>
            </div>

            <p>
                The latest version of .NET framework, .NET 7, offers a range of enhancements for developers to improve
                performance, language updates, and cloud-native, container-based development capabilities. Some of the
                key features of .NET 7 include: HOOHOHOHOHOHOH
            </p>

            <p>
                Performance improvements: .NET 7 continues to focus on performance enhancements, allowing for faster and
                more efficient application development.
            </p>

            <figure class="text-component__block">
                <img src="assets/img/nodecrap.png"
                     alt=".NET 7 perfs ‚ö°"/>
                <figcaption>.NET 7 perfs ‚ö°</figcaption>
            </figure>

            <ul class="yx-npq yx-nde">
                <li>Continued performance improvements.</li>
                <li>One BCL (base class library).</li>
                <li>Native support for ARM64 systems.</li>
                <li>Enhanced .NET support on Linux.</li>
                <li>HTTP/3 and improvements to minimal APIs for cloud-native apps.</li>
                <li>Native AOT for console applications.</li>
                <li> The F# 7 functional language features continued work on reliability and support for existing
                    features.
                </li>
            </ul>
            <figure class="text-component__block">
                <img src="assets/img/one.png"
                     alt="Unify"/>
                <figcaption>One platform ü§ù</figcaption>
            </figure>
            <p>
                .NET 7 is also being released in conjunction with other frameworks and tools such as:
            </p>

            <ul class="yx-npq yx-nde">
                <li>ASP.NET Core 7</li>
                <li>Entity Framework 7 (EF7)</li>
                <li>.NET MAUI (Multi-platform App UI)</li>
                <li>Windows Forms</li>
                <li>Windows Presentation Foundation</li>
                <li>Orleans 7 framework</li>
            </ul>

            <blockquote>
                For me, one of the most important feature of .NET 7 is the release of Entity Framework 7
            </blockquote>

            <p>
                EF Core 7 is the successor to EF Core 6, and can be referred as EF7 for brevity.
                EF7 contains many new features (167 enhancements and new features, both large and small, and 171 bug
                fixes !)
            </p>

            <ul class="yx-npq yx-nde">
                <li>JSON Columns.</li>
                <li>Bulk updates and deletes.</li>
                <li>Faster SaveChanges.</li>
                <li>Custom Database First templates (with T4 templates).</li>
                <li>Stored procedure mapping for insert/update/delete.</li>
                <li>New and improved interceptors and events.</li>
            </ul>

            <p>EF7 contains also a lot of smaller enhancements you can see <a
                    href="https://devblogs.microsoft.com/dotnet/announcing-ef7/" target="_blank">here</a>.</p>
            <p>
                One of the major enhancements in EF Core 7 is the addition of JSON Columns, which allows for more
                efficient storage and retrieval of JSON data. Additionally, bulk updates and deletes have been included,
                making it easier to perform these operations on large sets of data.
            <blockquote>
                One of the most valuable new features in EF Core 7 for me personally is the ability to perform bulk
                updates and deletes. This allows me to eliminate the need for additional libraries that perform similar
                tasks and instead work with the standard functionality provided by EF Core 7.
            </blockquote>

            </p>

            <p>
                EF Core 7 also offers faster performance, with improvements to the SaveChanges method. Custom Database
                First templates, using T4 templates, have also been introduced, allowing for greater flexibility in the
                design of the database.
            </p>

            <p>
                Another notable feature in EF Core 7 is the added support for stored procedure mapping for insert,
                update, and delete operations. This allows for more granular control over how data is modified in the
                database.
            </p>

            <p>
                Finally, EF Core 7 includes new and improved interceptors and events, providing more opportunities for
                developers to add custom logic and behavior to their applications.
            </p>

            <p>
                Overall, EF Core 7 is a significant upgrade from its predecessor and offers a wide range of new and
                improved features for developers to take advantage of. It's a must-have for anyone working with .NET and
                databases.
            </p>

            <figure class="text-component__block">
                <img src="assets/img/ef.png"
                     alt="ü¶Ñ Entity Framework ü¶Ñ"/>
                <figcaption>ü¶Ñ Entity Framework ü¶Ñ</figcaption>
            </figure>

            <p>
                In my experience as a .NET developer, one of the most important considerations when working with Entity
                Framework Core (EF Core) is the number of transactions and roundtrips that occur when inserting or
                updating data in the database. With the release of EF Core 7, this has become even more important, as
                the framework has introduced new optimizations to reduce the number of roundtrips and transactions that
                occur.
            </p>

            <p>
                One such optimization is the removal of transactions when only a single statement is involved. In EF
                Core 6, every SQL statement was wrapped in a transaction, which resulted in additional roundtrips to the
                database. However, in EF Core 7, the framework recognizes that many databases guarantee transactionality
                for single SQL statements and will remove the transaction in these cases.
            </p>

            <p>
                To demonstrate the impact of this optimization, I benchmarked the performance of the same code using
                both EF Core 6 and 7. The results showed a 25% improvement in performance with EF Core 7, thanks to the
                reduction in roundtrips.
            </p>

            <p>
                It's important to note that these benchmarks were conducted on a SQL Server instance on my local
                machine. However, it's important to keep in mind that this is not a typical practice when benchmarking.
                In a production environment, the latency of the database plays a significant role in the overall
                performance of the application. Therefore, it's essential to conduct benchmarks on a similar environment
                to accurately evaluate performance.
            </p>

            <p>
                In conclusion, the optimizations introduced in EF Core 7 are a welcome addition for .NET developers. The
                reduction in transactions and roundtrips can result in significant performance improvements, especially
                in scenarios where a single statement is involved
            </p>

            <figure class="text-component__block">
                <img src="assets/img/dotnetversus.png"
                     alt="EF6 VS EF7"/>
                <figcaption>EF6 VS EF7</figcaption>
            </figure>

            <div class="text-component__block text-component__block--outset">
                <h3 class="yx-ht">
                    Migration to .NET 7
                </h3>
            </div>

            <p>
                Migrating from .NET 6 to 7 requires upgrading to Visual Studio Code 2022 and updating the .NET Core SDK
                version in the global.json file. For example, if your global.json file currently has this line:
                "version": "6.0.200" it should be updated to: "version": "7.0.100".
            </p>

            <p>
                The next step is to update the Target Framework (TFM) to .NET 7.0 in the project file. For example, if
                your project file currently has this line:
                <code>
                    <TargetFramework>net6.0</TargetFramework>
                </code>
                , it should be updated to:
                <code>
                    <TargetFramework>net7.0</TargetFramework>
                </code>
                .
            </p>
            <p>
                Finally, you will need to update all package references in the project file to version 7.*.* or later.
                For example, if your project file currently has this line:
                <PackageReference Include="Microsoft.AspNetCore.JsonPatch" Version="6.0.0"/>
                , it should be updated to:
                <PackageReference Include="Microsoft.AspNetCore.JsonPatch" Version="7.0.1"/>
                .
                This applies to all references to Microsoft.AspNetCore., Microsoft.EntityFrameworkCore.,
                Microsoft.Extensions.*, and System.Net.Http.Json packages.
            </p>

            <p>
                It's important to be aware that during the migration process, you may encounter package breaking changes
                and breaking changes in the new version of .NET that may require additional work. This might include
                rewriting certain parts of the code to address these breaking changes. However, with a thorough testing
                and quality assurance process in place, these challenges can be mitigated and the benefits of upgrading
                to the latest version of .NET can be fully realized.

                Once these steps are completed, your application should be fully migrated to .NET 7 and ready to perform
                its operations.
            </p>

            <blockquote>
                Tips and best practices for a smooth migration
            </blockquote>

            <p>
                When migrating from one version of .NET to another, it's important to have a solid plan in place to
                ensure a smooth and successful migration. One of the first steps in this process is to thoroughly assess
                the current codebase and identify any potential issues that may arise during the upgrade. This will help
                you develop a comprehensive plan for the upgrade and minimize any potential delays or complications.
            </p>

            <p>
                A comprehensive plan should include testing and deployment strategies. Before starting the migration
                process, it is important to test the code thoroughly, both before and after the upgrade. This will help
                identify and resolve any issues that may arise during the migration process.
            </p>

            <p>
                In addition to testing, it's important to use the latest tools and versions of the .NET framework. These
                will have the most up-to-date features and performance improvements, and will help ensure that the
                migration process runs smoothly.
            </p>

            <figure
                    class="text-component__block text-component__block--outset text-component__block--right"
            >
                <img src="assets/img/release-schedule.png"
                     alt="DotNet release schedule"/>
                <figcaption>DotNet release schedule</figcaption>
            </figure>

            <p>
                Another important consideration is the potential for breaking changes in the new version of .NET and in
                packages you're using. It's important to be aware of these changes and plan accordingly, which may
                require rewriting certain parts of the code to address these breaking changes.
            </p>

            <blockquote>
                Before any migration, it is better to check the documentation of <a
                    href="https://learn.microsoft.com/en-us/dotnet/core/compatibility/7.0" target="_blank">DotNet
                breaking changes</a> and packages breaking changes.
            </blockquote>

            <p>
                Investing in quality assurance is crucial for a successful migration. It ensures the application is
                stable, secure, and performs well after the migration. Communication with the team and keeping them
                informed of progress is also important, as well as working together to resolve any issues that may
                arise.
            </p>

            <p>
                By following these tips and best practices,
                you can ensure a smooth and successful migration from one version of .NET to another.
            <p>

            <div class="text-component__block text-component__block--outset">
                <h3 class="yx-ht">
                    Our Experience
                </h3>
            </div>

            <p>
                In our experience, migrating to .NET 7 presented a number of challenges. We encountered breaking changes
                in some libraries that we were using, which required us to rewrite certain EF7 methods and eliminate the
                use of external libraries. This process was time-consuming and required a significant amount of effort
                to ensure that all dependencies were updated and that the application was still functional.
            </p>

            <p>
                We also had to migrate part of our old architecture under Microsoft Orleans, which we no longer deemed
                suitable for our needs. This required us to rethink our architecture, design new workflows, and
                implement new functionalities. Despite the additional effort required, we were able to adapt the old
                architecture to the new and gain performance doing so. This allowed us to take advantage of new
                capabilities offered by .NET 7 and improve the overall performance of our application.
            </p>

            <figure class="text-component__block text-component__block--outset text-component__block--right">
                <img style="height: 150px;width: 150px"
                     src="assets/img/orleans.png"
                     alt="MS Orleans"/>
                <figcaption>MS Orleans</figcaption>
            </figure>

            <p>
                The transition to EF7 brought another challenge as we had to adapt to the changes in Entity Framework's
                handling of Database First. This included creating T4 templates for reverse engineering the database,
                which required us to learn and implement new tools, adding an extra layer of complexity to the migration
                process.
            </p>

            <figure class="text-component__block text-component__block--outset text-component__block--right">
                <img src="assets/img/t4.png"
                     alt="T4"/>
                <figcaption>T4</figcaption>
            </figure>

            <p>
                Despite these challenges, we also encountered a number of benefits. We saw a significant increase in
                overall performance, as well as a reduction in memory and CPU usage. This was particularly evident in
                our data-intensive tasks, which required the use of Entity Framework. The new version of EF7 offered
                better performance, which translated into faster response times for our clients.
            </p>

            <p>
                We also saw a reduction in the delay of EF7 requests, which was a major improvement for our clients who
                rely on our application for their daily operations. Additionally, we were able to reduce the use of
                transactions when they were not necessary, which resulted in a reduction of the load on our database and
                improved the overall performance of our application.
            </p>

            <p>
                Additionally, we took advantage of this major update to upgrade our database from SQL Server 2017 to SQL
                Server 2019, and implemented Always Encrypted and Transparent Data Encryption for better data security
                for our client. This allowed us to comply with industry standards and regulations and ensured the
                protection of our client's sensitive data.
            </p>

            <p>
                We were able to successfully navigate the migration process thanks to the thorough testing and quality
                assurance measures in place. The use of unit tests and multiple testing sessions with our client allowed
                us to identify and address any potential issues and breaking changes. This approach enabled us to ensure
                the perfect functionality of our application and identify areas for improvement in the codebase.
            </p>

            <div class="text-component__block text-component__block--outset">
                <h3 class="yx-ht">
                    Conclusion
                </h3>
            </div>

            <p>
                In conclusion, migrating to .NET 7 presented a number of challenges for our team. However, these
                challenges were
                outweighed by the significant benefits we saw in terms of performance, scalability, and security. Our
                clients also saw improvements in response times and data security. Despite the effort required, the
                migration allowed us to take advantage of new capabilities offered by .NET 7 and improve the overall
                performance of our application, providing a better service for our clients.
            </p>

            <div class="text-component__block text-component__block--outset">
                <h3 class="yx-ht">
                    References
                </h3>
            </div>

            <p>
                References used for this article:
            </p>
            he following resources were used in the creation of this article:

            Microsoft official migration documentation
            Microsoft official .Net 7 breaking changes
            SQL Server Always Encrypted documentation
            SQL Server Transparent Data Encryption documentation
            T4 template documentation"
            <ul class="yx-npq yx-nde">
                <li>
                    <a href="https://learn.microsoft.com/fr-fr/dotnet/architecture/modernize-desktop/example-migration"
                       target="_blank">Microsoft official migration documentation</a></li>
                <li>
                    <a href="https://learn.microsoft.com/en-us/dotnet/core/compatibility/7.0" target="_blank">Microsoft
                        official .Net 7 breaking changes</a>
                </li>
                <li>
                    <a href="https://learn.microsoft.com/fr-fr/sql/relational-databases/security/encryption/always-encrypted-database-engine?view=sql-server-ver16"
                       target="_blank">SQL Server AE</a>
                </li>
                <li>
                    <a href="https://learn.microsoft.com/fr-fr/azure/azure-sql/database/transparent-data-encryption-tde-overview?view=azuresql&viewFallbackFrom=sql-server-ver16&tabs=azure-portal"
                       target="_blank">SQL Server TDE</a>
                </li>
                <li>
                    <a href="https://learn.microsoft.com/fr-fr/visualstudio/modeling/code-generation-and-t4-text-templates?view=vs-2022"
                       target="_blank">T4 template</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="yx-nmq yx-t max-width-adaptive-sm yx-sy" aria-hidden="true">
        <span></span>
    </div>
    <div class="yx-t max-width-adaptive-sm">
        <div class="yx-nht">
            <a href="https://www.linkedin.com/in/naw57/" target="_blank" class="yx-nhn"
            ><img src="assets/img/author-img-1.jpg" alt="Author picture"
            /></a>
            <div class="yx-nhr text-component yx-ngr">
                <h4>
                    Hi! I'm <a href="https://www.linkedin.com/in/naw57/" target="_blank" rel="author">Nathan Wilck√©</a>
                </h4>
                <p class="color-contrast-medium">
                    Experienced .NET 7 architect with a proven track record of successful projects in the field. Skilled
                    in designing and implementing scalable and efficient solutions using the latest .NET technologies.
                </p>
            </div>
        </div>
    </div>
</article>

<footer class="yx-ndn">
    <div class="yx-t yx-ge yx-yy yx-yw yx-yj yx-af yx-aj">
        <div class="flex yx-r_ items-center gap-xxs yx-tih yx-ti_">
            <div>
                <div class="text-sm yx-twd color-contrast-medium flex yx-rk gap-xs">
                    <span>¬© Nathan Wilck√©</span>
                </div>
            </div>
            <div>

            </div>
        </div>
    </div>
</footer>
<script src="assets/js/scripts5e1f.js?v=2"></script>
</body>
</html>
